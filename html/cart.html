<!DOCTYPE html>
<html>
<head>
    <title>Cart</title>
    <link rel="stylesheet" href="../css/cart.css">
</head>
<body> 
    <header>
        <h1>Your Cart</h1>
    </header>
    <nav>
        <a href="../index.html">HOME</a>
        <a href="../html/about.html">ABOUT US</a>
        <a href="../html/help.html">HELP</a>
        <a href="../html/shop.html">SHOP</a>
        <a href="../html/cart.html">CART</a>
    </nav>
    
    <ul id="cartItemsList"></ul>
    <div id="totalPrice"></div>
    <button class="checkout-button" onclick="checkout()"><b>Checkout</b></button>
    <a href="shop.html" class="cancel">Cancel</a>

 
    <script>
        var cartItems = sessionStorage.getItem('cartItems');

        if (cartItems) {
            cartItems = JSON.parse(cartItems);
            var totalPrice = 0;

            for (var i = 0; i < cartItems.length; i++) {
                var cartItem = cartItems[i].split('|');
                var productName = cartItem[0];
                var imageURL = '../pictures/logo.png';
                var price = parseFloat(cartItem[1]);
                var quantity = 1;

                document.getElementById('cartItemsList').innerHTML += '<li><img src="' + imageURL + '" alt="' + productName + '" class="product-image">' + productName + '<div class="quantity"><input type="number" class="quantity-input" min="1" value="1" onchange="updatePrice()"></div><button class="delete-button" onclick="removeItem(' + i + ',' + price + ')">Delete</button></li>';

                totalPrice += price;
            }

            document.getElementById('totalPrice').innerHTML = 'Total Price: ₱' + totalPrice.toFixed(2);
        } else {
            document.getElementById('cartItemsList').innerHTML = '<li class="empty-cart">Your cart is empty.</li>';
        }

        function removeItem(index, price) {
            var cartItems = sessionStorage.getItem('cartItems');
            
            if (cartItems) {
                cartItems = JSON.parse(cartItems);
                cartItems.splice(index, 1);
                sessionStorage.setItem('cartItems', JSON.stringify(cartItems));
                location.reload(); 
            }

            var totalPrice = parseFloat(document.getElementById('totalPrice').innerHTML.split(':')[1]);
            totalPrice -= price;
            document.getElementById('totalPrice').innerHTML = 'Total Price: ₱' + totalPrice.toFixed(2);
        }

        function updatePrice() {
            var totalPrice = 0;
            var quantityInputs = document.getElementsByClassName('quantity-input');

            for (var i = 0; i < quantityInputs.length; i++) {
                var price = parseFloat(cartItems[i].split('|')[1]);
                var quantity = parseFloat(quantityInputs[i].value);

                totalPrice += price * quantity;
            }

            document.getElementById('totalPrice').innerHTML = 'Total Price: ₱' + totalPrice.toFixed(2);
        }

        function checkout() {
            sessionStorage.removeItem('cartItems');
            location.reload(); 
            alert("Checkout Successful!");
        }
    </script>
       <div class="footer">
        <p>&copy; Seoulfinds</p>
    </div>

</body>
</html>
